[GENERAL]
description   = C. elegans modENCODE (WormBase build WS180)
db_adapter    = Bio::DB::GFF
db_args       = -dsn dbi:mysql:worm;user=nobody

aggregators = alignment
              wormbase_gene{coding_exon,five_prime_UTR,three_prime_UTR}
	      ngasp_gene{CDS,five_prime_UTR,three_prime_UTR}      
              RNA{exon/Transcript}
              ost{expressed_sequence_match}
              pseudo{exon:Pseudogene}

# Web site configuration info
gbrowse_root = gbrowse/
stylesheet   = /css/gbrowse.css
buttons      = images/buttons
js           = js
tmpimages    = tmp
balloon images = /images/balloons
balloon tips   = 1
drag and drop  = 1
titles are balloons = 1
das mapmaster = SELF


region segment = AUTO

plugins     = GFFDumper FastaDumper BatchDumper Submitter PrimerDesigner

quicklink plugins = GFFDumper FastaDumper

# list of tracks to turn on by default
#default features = Genes OSTB ESTBSPLICED ETILE
default features = Genes 

# The class of the objects used to establish the reference coordinates.
reference class  =

# examples to show in the introduction
examples = I:110643..112642 V:625000..675000 X:120000..140000

search attributes = Note

# "automatic" classes to try when an unqualified identifier is given
#automatic classes = Sequence CDS Gene 
automatic classes = Transcript Locus Gene GMap PCR_product Operon Genbank Variation Allele CDS Transposon Sequence Clone

image_padding = 105
pad_right  = 25

head   =  <script type="text/javascript" src="/js/modencode.js"></script>

header =
  <table style="border-bottom:5px groove blue;margin-bottom:10px">
    <tr>
      <td valign=top>
        <a href="http://www.modencode.org">
          <img src="http://www.modencode.org/img/worm_small.png"
               border=0 alt="modENCODE logo worm" />
        </a>
      </td>
      <td valign=middle>
        <span style="font:arial;font-size:18pt"><i>C. elegans</i> Genome Browser</span>
      </td>
    </tr>
  </table>


# a footer
footer = <br>
        <table width="100%">
        <TR>
        <TD align="LEFT" class="databody">
        For the source code for this browser, see the <a href="http://www.gmod.org">
        Generic Model Organism Database Project.</a>  <br>For other questions, send
        mail to <a href="mailto:mckays@cshl.org">mckays@cshl.org</a>.
        </TD>
        </TR>
        </table>
        <hr>

html1 = <script type="text/javascript">
          balloon.fadeIn=750;
	  balloon.delayTime=750;
          balloon.fadeOut=200;
          document.mainform.onsubmit = function(){ return balloonIsSuppressed = true };
        </script>
        <table width="100%">
         <TR><td align=center>
         <h2>A mirror of this browser is also available at <a href="http://modencode.oicr.on.ca/cgi-bin/gbrowse/worm">http://modencode.oicr.on.ca</a> </h2>
         </td></tr></table>
html2 = 
html3 =
html4 =

html5 = <div style="padding:3px;border:2px solid blue;background:#CCCCFF;font-size:10pt;margin:auto">
        <table><tr><td width=7% rowspan=2><img src="/img/alert.png" height=40></td>
        <th align=left>modENCODE tracks denote data sets produced by members of the <a href="http://www.modencode.org">modENCODE consortium</a>.
        </th></tr><tr>
        <td><li>Some of the modENCODE tracks are included in the genome browser as 'preliminary' and may be subject to changes.
        <li>Data will become available for public use/download after being checked and validated by the
        <a href="http://www.modencode.org/Stein.shtml">modENCODE data coordinating center</a>.<li>Please contact
        <a href="mailto:help@modencode.org">help@modencode.org</a> for more information.</p>
        </td></tr></table></div><hr>


html6 =

image widths  = 450 500 600 640 800 1024
default width = 800
max segment     = 1000000
default segment = 5000
zoom levels    = 100 200 1000 2000 5000 10000 20000 50000 100000 200000 5000000 1000000
overview bgcolor = #F0F0F0

[DETAIL SELECT MENU]
width = 260
html  = <table style="width:100%">
         <tr>
           <th style="background:lightsteelblue;cell-padding:5">
             SELECTION
             <span style="right:0px;position:absolute;color:blue;cursor:pointer"
                   onclick="SelectArea.prototype.cancelRubber()">
               [X]
             </span>
           </th>
         </tr>
         <tr>
           <td>
             <a href="javascript:SelectArea.prototype.clearAndSubmit()">
              Zoom in
             </a>
           </td>
         </tr>
         <tr>
           <td onmouseup="SelectArea.prototype.cancelRubber()">
             <a href="?plugin=FastaDumper;plugin_action=Go;name=SELECTION" target="_new">
              Dump selection as FASTA
             </a>
           </td>
         </tr>
         <tr>
           <td onmouseup="SelectArea.prototype.cancelRubber()">
             <a href="http://www.wormbase.org/db/seq/gbrowse/elegans?name=SELECTION" target="_new">
               Browse selection at WormBase
             </a>
           </td>
         </tr>
         <tr>
           <td onmouseup="SelectArea.prototype.cancelRubber()">
             <a href="http://genome.ucsc.edu/cgi-bin/hgTracks?clade=worm&org=C.+elegans&db=ce4&position=chrSELECTION&pix=620&Submit=submit" target="_new">
               Browse selection at UCSC
             </a>
           </td>
         </tr>
         <tr>
           <td onmouseup="SelectArea.prototype.cancelRubber()">
             <a href="?name=SELECTION;plugin=Submitter;plugin_do=Go;Submitter.target=UCSC_BLAT" target="_new">
               BLAT this sequence
             </a>
           </td>
         </tr>
         <tr>
           <td onmouseup="SelectArea.prototype.cancelRubber()">
             <a href="?name=SELECTION;plugin=Submitter;plugin_do=Go;Submitter.target=NCBI_BLAST" target="_new">
               BLAST this sequence
             </a>
           </td>
         </tr>
       </table>

[Submitter:plugin]
submitter = [UCSC_BLAT]
            url        = http://genome.ucsc.edu/cgi-bin/hgBlat
            seq_label  = userSeq
            output     = hyperlink
            type       = DNA
            extra_html = Genome:
                         <SELECT name=org>
                         <OPTION VALUE="Human">Human</OPTION>
                         <OPTION VALUE="Chimp">Chimp</OPTION>
                         <OPTION VALUE="Rhesus">Rhesus</OPTION>
                         <OPTION VALUE="Mouse">Mouse</OPTION>
                         <OPTION VALUE="Mouse">Mouse</OPTION>
                         <OPTION VALUE="Rat">Rat</OPTION>
                         <OPTION VALUE="Cat">Cat</OPTION>
                         <OPTION VALUE="Dog">Dog</OPTION>
                         <OPTION VALUE="Horse">Horse</OPTION>
                         <OPTION VALUE="Cow">Cow</OPTION>
                         <OPTION VALUE="Opossum">Opossum</OPTION>
                         <OPTION VALUE="Platypus">Platypus</OPTION>
                         <OPTION VALUE="Chicken">Chicken</OPTION>
                         <OPTION VALUE="Lizard">Lizard</OPTION>
                         <OPTION VALUE="X. tropicalis">X. tropicalis</OPTION>
                         <OPTION VALUE="Zebrafish">Zebrafish</OPTION>
                         <OPTION VALUE="Tetraodon">Tetraodon</OPTION>
                         <OPTION VALUE="Fugu">Fugu</OPTION>
                         <OPTION VALUE="Stickleback">Stickleback</OPTION>
                         <OPTION VALUE="Medaka">Medaka</OPTION>
                         <OPTION VALUE="C. intestinalis">C. intestinalis</OPTION>
                         <OPTION VALUE="S. purpuratus">S. purpuratus</OPTION>
                         <OPTION SELECTED VALUE="C. elegans">C. elegans</OPTION>
                         <OPTION VALUE="C. brenneri">C. brenneri</OPTION>
                         <OPTION VALUE="C. briggsae">C. briggsae</OPTION>
                         <OPTION VALUE="C. remanei">C. remanei</OPTION>
                         <OPTION VALUE="P. pacificus">P. pacificus</OPTION>
                         <OPTION VALUE="D. melanogaster">D. melanogaster</OPTION>
                         <OPTION VALUE="D. simulans">D. simulans</OPTION>
                         <OPTION VALUE="D. sechellia">D. sechellia</OPTION>
                         <OPTION VALUE="D. yakuba">D. yakuba</OPTION>
                         <OPTION VALUE="D. erecta">D. erecta</OPTION>
                         <OPTION VALUE="D. ananassae">D. ananassae</OPTION>
                         <OPTION VALUE="D. pseudoobscura">D. pseudoobscura</OPTION>
                         <OPTION VALUE="D. persimilis">D. persimilis</OPTION>
                         <OPTION VALUE="D. virilis">D. virilis</OPTION>
                         <OPTION VALUE="D. mojavensis">D. mojavensis</OPTION>
                         <OPTION VALUE="D. grimshawi">D. grimshawi</OPTION>
                         <OPTION VALUE="A. gambiae">A. gambiae</OPTION>
                         <OPTION VALUE="A. mellifera">A. mellifera</OPTION>
                         <OPTION VALUE="S. cerevisiae">S. cerevisiae</OPTION>
                         <OPTION VALUE="SARS">SARS</OPTION>
                         </SELECT>

            [NCBI_BLAST]
            confirm   = 1
            url       = http://www.ncbi.nlm.nih.gov/blast/Blast.cgi
            seq_label = QUERY
            PAGE      = Nucleotides
            PROGRAM   = blastn
            DATABASE  = nr
            CLIENT    = web
            CMD       = put


########################
# Default glyph settings
########################

[TRACK DEFAULTS]
glyph         = generic
height        = 10
bgcolor       = lightgrey
fgcolor       = black
font2color    = blue
label density = 100
bump density  = 500
# where to link to when user clicks in detailed view
link          = AUTO


################## TRACK CONFIGURATION ####################
# the remainder of the sections configure individual tracks
###########################################################
[Genes]
das category  = transcription
feature       = wormbase_gene:Coding_transcript RNA pseudo
                RNAz:ncRNA
filter       = sub {shift->class ne 'UTR'}
das category = transcription
glyph        = sub {shift->primary_tag eq 'pseudo' ? 'box' : 'full_transcript'}
bgcolor      = white
fgcolor      = black
strand_arrow = sub {shift->primary_tag eq 'pseudo'}
forwardcolor = violet
reversecolor = cyan
utr_color    = gray
category     = Genes
height       = sub {shift->primary_tag eq 'pseudo' ? 6 : 8}
label        = sub {
		my $f = shift;
		my $dn = $f->display_name;
		my @aliases = $f->each_tag_value('Alias');
		foreach (@aliases) {
		   return "$dn ($_)" if /^\w+-\d+/;
		}
		return $dn;
	}
description  = sub { join '; ', shift->each_tag_value('Note'); }
link         = http://www.wormbase.org/db/get?name=$name;class=Gene
label_transcripts =  1
das category = transcription
key          = Curated WormBase Genes
citation     = These are gene predictions that have been reviewed by WormBase curators.  The
	     purple and blue colors indicate CDS regions on the forward and
	     reverse strands respectively.  The grey areas represent 5' and
	     3' ESTs assigned automatically using the extents of
	     overlapping ESTs and full-length cDNAs.  The UTR predictions
	     have <b>not</b> been reviewed by WormBase curators, and are
	     known to contain artifacts. If sufficient room is available
	     between features, gene models end with a triangle; if not a
	     small arrow is used.  The tRNAs are predicted by Sean Eddy&#146;s
	     tRNAscan program, and miRNA transcripts taken from a variety
	     of literature sources. RNAz-derived ncRNAs were predicted using
             the <a href="http://www.tbi.univie.ac.at/~wash/RNAz/">RNAz algorithm</a>.
             Please select the RNA for more details.
title        = Curated wormbase gene $name

[Genes:100000]
glyph        = generic
bump         = 0
maxdepth     = 1
stranded     = 1
label        = 0
description  = 0

[AUGUSTUS:100000]
glyph        = generic
bump         = 0
maxdepth     = 1
stranded     = 1
label        = 0
description  = 0

[AUGUSTUS]
feature      = ngasp_gene:AUGUSTUS
label        = 1
description  = 1
key          = nGASP: AUGUSTUS
glyph        = full_transcript
forwardcolor = violet
reversecolor = cyan
utr_color    = gray
category     = Genes
title        = AUGUSTUS gene $name
citation     = AUGUSTUS gene set from the nGASP competition.  Courtesy of Mario Stanke.
               Gene models are available for download at ftp://ftp.wormbase.org/pub/wormbase/nGASP/final_gene_predictions/predictions

[mGENE:100000]
glyph        = generic
bump         = 0
maxdepth     = 1
stranded     = 1
label        = 0
description  = 0

[mGENE]
feature      = ngasp_gene:mGENE
label        = 1
description  = 1
key          = nGASP: mGENE
glyph        = full_transcript
forwardcolor = violet
reversecolor = cyan
utr_color    = gray
category     = Genes
title        = mGENE gene $name
citation     = mGENE gene set from the nGASP competition.  Courtesy of Gabriele Schweikert and Gunnar Raetsch.
               Gene models are available for download at ftp://ftp.wormbase.org/pub/wormbase/nGASP/final_gene_predictions/predictions

[FGENESH:100000]
glyph        = generic
bump         = 0
maxdepth     = 1
stranded     = 1
label        = 0
description  = 0

[FGENESH]
feature      = ngasp_gene:FGENESH
label        = 1
description  = 1
key          = nGASP: FGENESH
glyph        = full_transcript
forwardcolor = violet
reversecolor = cyan
utr_color    = gray
category     = Genes
title        = FGENESH++ gene $name
citation     = FGENESH++ gene set from the nGASP competition.  Courtesy of Darin Blasiar.
               Gene models are available for download at ftp://ftp.wormbase.org/pub/wormbase/nGASP/final_gene_predictions/predictions

[JIGSAW:100000]
glyph        = generic
bump         = 0
maxdepth     = 1
stranded     = 1
label        = 0
description  = 0

[JIGSAW]
feature      = ngasp_gene:nGASP
label        = 1
description  = 1
key          = nGASP: JIGSAW combined genes
glyph        = full_transcript
forwardcolor = violet
reversecolor = cyan
utr_color    = gray
category     = Genes
title        = JIGSAW gene $name
citation     = JIGSAW gene set from the nGASP competition.  This is the combined gene set for AUGUSTUS
               mGENE and FGENESH++.  Courtesy of Darin Blasiar.
               Gene models are available for download at ftp://ftp.wormbase.org/pub/wormbase/nGASP/final_gene_predictions/predictions


[TranslationF]
glyph        = translation
global feature = 1
height       = 20
fgcolor      = purple
start_codons = 0
strand       = +1
arrow_height = 2
translation  = 3frame
category     = Sequence
key          = 3-frame translation (forward)
citation     = This track shows the position of stop codons at low magnifications,
	and the 3-frame translation at high magnifications.  Only the forward strand
	is shown.

[DNA/GC Content]
glyph          = dna
global feature = 1
strand         = both
gc_window      = auto
height         = 40
fgcolor        = red
key            = GC Content
category       = Sequence

[TranslationR]
glyph        = translation
global feature = 1
height       = 20
fgcolor      = blue
strand       = -1
start_codons = 0
arrow_height = 2
translation  = 3frame
category     = Sequence
key          = 3-frame translation (reverse)
citation     = This track shows the position of stop codons at low magnifications,
	and the 3-frame translation at high magnifications.  Only the reverse
	strand is shown.


[OST]
feature       = ost:BLAT_OST_BEST
glyph         = segments
category      = Expression
draw_target   = 1
show_mismatch = 1
ragged_start  = 1
height        = 5
bgcolor       = black
fgcolor       = black
connector     = solid
group_pattern = /^OST[RF]/
link          = sub {
                        my $feature = shift;
                        my $name = $feature->name;
                        $name =~ s/^OST[FR](10|30)/$1/;
                        $name =~ s/^OST[FR]/10/;
                        $name =~ s/_\d*//;
                        $name =~ s/([A-Z]+\d+)$/\@$1/;
                        return qq[http://worfdb.dfci.harvard.edu/searchallwormorfs.pl?by=plate&sid=$name];
                        }
label = 1
link_target   = _blank
key           = ORFeome sequence tags
citation      = These are <a href="http://worfdb.dfci.harvard.edu/">ORFeome project</a> sequence reads.
        The ORFeome project designs primer assays for spliced mRNAs and then performs sequence reads
        on rtPCR material, producing "OSTs."  This track shows ORFeome project OSTs aligned to the
        <i>C. elegans</i> genome using Jim Kent's BLAT program
        [<a href="http://genome.cse.ucsc.edu/cgi-bin/hgBlat">http://genome.cse.ucsc.edu/cgi-bin/hgBlat</a>].
        This track shows the best unique location for each OST.  Blue boxes
        show RST sequences from 5' and 3' RACE experiments using SL1/and SL2 as the 5' universal primer (Kourosh
        Salehi-Ashtiani, Vidal Lab).

[OSTB:50000]
feature   = expressed_sequence_match:BLAT_OST_BEST

[0STB:101]
fontcolor     = black
height        = 5

[ESTBSPLICED:100000]
label        = 0
desciption   = 0 

[ESTB:50000]
feature   = EST_match:BLAT_EST_BEST

[ESTB:101]
fontcolor     = black
height        = 5

[ESTB]
feature       = alignment:BLAT_EST_BEST
glyph         = segments
sort_order    = name
category      = Expression
draw_target   = 1
show_mismatch = 1
ragged_start  = 1
height        = 5
bgcolor       = limegreen
fgcolor       = black
connector     = solid
group_pattern = /\.[35]$/
key           = ESTs (all)
citation      = These are C. elegans expressed sequence tags (ESTs), that have been aligned to
        the C. elegans genome using Jim Kent&#146;s BLAT program [<a href="http://genome.cse.ucsc.edu/cgi-bin/hgBlat">
        http://genome.cse.ucsc.edu/cgi-bin/hgBlat</a>].
        This track shows the best unique location for each EST.
        The paired 5' and 3' ESTs from the same cDNA clone are connected by a dashed line.

[ESTBSPLICED]
feature       = alignment:BLAT_EST_BEST
glyph         = segments
sort_order    = name
filter        = sub {shift->segments > 1}
category      = Expression
draw_target   = 1
show_mismatch = 1
ragged_start  = 1
height        = 5
bgcolor       = limegreen
fgcolor       = black
connector     = solid
group_pattern = /\.[35]$/
key           = ESTs (spliced)
citation      = The subset of C. elegans expressed sequence tags (ESTs) that span introns, aligned to
        the C. elegans genome using Jim Kent&#146;s BLAT program [<a href="http://genome.cse.ucsc.edu/cgi-bin/hgBlat">
        http://genome.cse.ucsc.edu/cgi-bin/hgBlat</a>].
        This track shows the best unique location for each EST.  
        The paired 5' and 3' ESTs from the same cDNA clone are connected by a dashed line.



#[SNPs]
#feature      = SNP:Allele
#category      = Variation Tracks
#label        = 0
#glyph        = sub {
#                my $f = shift;
#                # Some SNPs come out length 3. Dunno why.
#                return 'diamond'  if $f->length <= 3;
#                return 'generic';
#        }
#bgcolor      = sub {
#                my $f = shift;
#                my $description = ($f->name =~ /^snp_/ || $f->name =~ /^uCE/) ? 'predicted' : 'verified';
#                return $description eq 'verified' ? 'green' : 'yellow';
#        }
#fgcolor      = black
#font2color   = blue
#height       = 8
#description  = sub {
#                my $f = shift;
#                my $description = ($f->name =~ /^snp_/ || $f->name =~ /^uCE/) ? 'predicted' : 'verified';
#                return "SNP ($description)";
#        }
#key          = SNPs
#citation     = This track shows confirmed and predicted single nucleotide polymorphisms (SNPs).
#               Confirmed SNPs that generate an RFLP (a Snip-SNP) are shown in green. Confirmed SNPs
#               sequence-detectable SNPs are shown in yellow, and predicted SNPs are shown in red.

[ETILE:40001]
smoothing wondow = 4
max_score        = 8

[ETILE]
smoothing     = mean
smoothing window = 16
max_score     = 6
feature       = tiling_array:mixed_stage_non-polyadenylated_RNA
	        tiling_array:mixed_stage_polyadenylated_RNA
		tiling_array:mixed_stage_small_non-polyadenylated_RNA
description   = 0
sort_order    = sub ($$) {
	          my $a = shift->feature->source_tag;
		  my $b = shift->feature->source_tag;
	          return -1 if $a =~ /^mixed_stage_poly/;
		  return 1  if $b =~ /^mixed_stage_poly/; 
		  return 0;
                }
glyph         = wiggle_density
glyph select   = wiggle_density wiggle_xyplot
height        = 8
bgcolor       = black
category      = Expression
key           = Transciption tiling arrays
balloon hover = Affymetrix tiling array data from He et al. (2007) <b>Mapping the <i>C. elegans</i> noncoding transcriptome with a whole-genome tiling microarray</b> 
label         = sub {
                  my $feature = shift;
                  my $desc = $feature->source_tag;
                  $desc =~ s/adenylated/A/;
                  $desc =~ s/mixed_stage_//;
                  $desc =~ s/small.+/small RNA/;
		  return sprintf "%-17s", $desc;
                }
label_position = left
citation      = <b>Life_stage</b>  mixed stage<br>
 <b>Strain</b>  N2<br>
 <b>Remark</b>  The data were analyzed


 with Affymetrix Tiling analysis software (version 1.0.15). Frequency is a log2(max(PM-MM,1))
 value for each probe, after quantile-normalization and median intensity scaling for
 all replicates. See <a href="http://www.ncbi.nlm.nih.gov/sites/entrez?db=pubmed&cmd=retrieve&dopt=AbstractPlus&list_uids=17785534"
 target="_new" title="Mapping the C. elegans noncoding transcriptome with a whole-genome tiling microarray">
 He et al., 2007</a> for details.


##LIEBTRACKS
#
#[LIEBChIP_chip]
#feature        = microarray_oligo
#filter         = sub {my $src = shift->source_tag; return $src !~ /peak|ntibody|Ig|1E-/ && $src =~ /Lieb/;}
#sort_order     = sub ($$) {
#                  my $a = shift->feature->source_tag;
#                  my $b = shift->feature->source_tag;
#                  return 1  if $a =~ /HIM/;
#		  return -1 if $b =~ /HIM/;
#                  return 1  if $a =~ /Lieb_H3|Ig/ && $b !~ /Lieb_H3/;
#                  return -1 if $b =~ /Lieb_H3|Ig/ && $a !~ /Lieb_H3/;
#		  return -1 if $a =~ /control/ && $b =~ /Lieb_H3/;
#                  return 1  if $b =~ /control/ && $a =~ /Lieb_H3/;
#		  return $a cmp $b;
#                }
#glyph          = wiggle_density
#glyph select   = wiggle_density wiggle_xyplot
#neg_color      = orange
#pos_color      = blue
#min_score      = sub {shift->source_tag =~ /H3|IGG/i ? -2 : -1}
#max_score      = sub {shift->source_tag =~ /H3|IGG/i ? 2 : 1}
#height         = 8
#label          = sub {
#                   my $src = shift->source_tag;
#                   $src =~ s/_(PEAKS|AVERAGE|AVEZ|NORMALIZED)//gi;
#		   $src =~ s/Lieb_//;
#                   $src =~ s/H3$/H3 control/;
#                   $src = $src =~ /H3|Ig/ ? "L3    $src" : $src =~ /HIM/ ? "adult $src" : "embro $src";
#                   $src =~ s/_1E/E/;
#                   return sprintf "%-17s", $src;
#                 }
#label_position = left
#smoothing      = mean
#smoothing window  = sub {
#                      my $src = shift->source_tag;
#		      return $src =~ /H3|IgG/ ? 1 : 16;	  
#                    }
#key            = ChIP-chip arrays
#Category       = modENCODE Tracks: Lieb Group
##title          = sub { '<b>Experiment: '.shift->source_tag."</b><br>Balloon contents TBA.  Chrissy, I have not forgotten your request for score stats!" }
#title          = sub {
#                   my $name = shift->name;
#                   "<b>$name ChIP-chip experiment from the Lieb group</b><br>".
#                   "The color scheme is orange &lt; zero &gt; blue. ".
#                   "Color-intensity corresponds to signal amplitude, truncated ".
#		   "to the range of <span style=white-space:nowrap>".
#		   "-1.0 - &#43;1.0 &#40;-2.0 - &#43;2.0</span> for H3 experiments&#41;";
#                }
#citation       = ChIP-chip experiments from labs in the Lieb group.  Regions shown in orange are less than zero and in blue are greater than zero.
#                 The intensity of the color indicates the signal amplitude.  The range is truncated at -1:+1 for all tracks excpet the H3 tracks, which
#                 have a larger range of scores.  Except for the H3 tracks, the mean scores for three biological replicate experiments were used.
#
#[LIEBChIP_chipXY]
#feature        = microarray_oligo
#filter         = sub {shift->source_tag !~ /peak|antibody|IgG|miller|reinke|snyder|_1E-/i}
#glyph          = wiggle_xyplot
#glyph select    = wiggle_density wiggle_xyplot
#sort_order     = sub ($$) {
#                  my $a = shift->feature->source_tag;
#                  my $b = shift->feature->source_tag;
#                  return 1  if $a =~ /HIM/;
#                  return -1 if $b =~ /HIM/;
#                  return 1  if $a =~ /Lieb_H3|Ig/ && $b !~ /Lieb_H3/;
#                  return -1 if $b =~ /Lieb_H3|Ig/ && $a !~ /Lieb_H3/;
#                  return -1 if $a =~ /control/ && $b =~ /Lieb_H3/;
#                  return 1  if $b =~ /control/ && $a =~ /Lieb_H3/;
#                  return $a cmp $b;
#                }
#neg_color      = orange
#pos_color      = blue
#min_score      = -2
#max_score      = 2
#description      = sub {
#                   my $src = shift->source_tag;
#                   $src =~ s/_(PEAKS|AVERAGE|AVEZ|NORMALIZED)//gi;
#		   $src =~ s/Lieb_//;
#                   $src =~ s/H3$/H3 control/;
#                   $src = $src =~ /^H3|Ig/ ? "L3 $src" : $src =~ /HIM/ ? "adult $src" : "embryo $src";
#                   $src =~ s/_1E/E/;
#                   return $src
#                 }
#label          = 0
#smoothing      = mean
#smoothing window  = 10
#key            = ChIP-chip arrays (XY-plot)
#Category       = modENCODE Tracks: Lieb Group
##title          = sub { '<b>Experiment: '.shift->source_tag."</b><br>Balloon contents TBA.  Chrissy, I have not forgotten your request for score stats!" }
#title          = sub {
#                   my $name = shift->name;
#                   "<b>$name ChIP-chip experiment from the Lieb group</b><br>".
#                   "The color scheme is orange < 0 > blue. ";
#                }
#citation       = ChIP-chip experiments from labs in the Lieb group.  Regions shown in orange are less than zero and in blue are greater than zero.
#                 Except for the H3 tracks, the mean scores for three biological replicate experiments were used.
#
#[LIEB_peaks]
#feature        = microarray_oligo
#filter         = sub {
#	           my $src = shift->source_tag;
#		   return $src =~ /peak|_1E-/i && $src !~/snyder/i;
#                 }
#glyph          = wiggle_box
#bgcolor        = blue
#fgcolor        = blue
#sort_order     = sub ($$) {
#                  my $a = shift->feature->source_tag;
#                  my $b = shift->feature->source_tag;
#                  return 1  if $a =~ /HIM/;
#                  return -1 if $b =~ /HIM/;
#                  return 1  if $a =~ /Lieb_H3|Ig/ && $b !~ /Lieb_H3/;
#                  return -1 if $b =~ /Lieb_H3|Ig/ && $a !~ /Lieb_H3/;
#                  return -1 if $a =~ /control/ && $b =~ /Lieb_H3/;
#                  return 1  if $b =~ /control/ && $a =~ /Lieb_H3/;
#                  return $a cmp $b;
#                }
#label          = sub {
#                   my $src = shift->source_tag;
#                   $src =~ s/_(PEAKS|AVERAGE|AVEZ|NORMALIZED)//gi;
#                   $src =~ s/Lieb_//;
#                   $src =~ s/H3$/H3 control/;
#                   $src = $src =~ /^H3|Ig/ ? "L3    $src" : $src =~ /HIM/ ? "adult $src" : "embro $src";
#                   return sprintf "%-17s", $src;
#
#                 }
#label_position = left
#key            = ChIP-chip computed peaks
#Category       = modENCODE Tracks: Lieb Group
#title          = sub {
#                   my $name = shift->name;
#		   $name =~ s/_\S+//;
#                   "<b>Computed peaks for ChIP-chip arrays from labs in the Lieb group: $name</b><br>".
#		   "Computed peaks are putative binding sites for $name";
#                }
#citation       = Computed peaks are regions for which the signal in the ChIP-chip array are significantly above background levels.  Such regions are
#                 putative binding sites for the protein targeted by the antibody.
#
#ENDLIEBTRACKS

[Miller_peaks]
feature        = microarray_oligo
filter         = sub {shift->source_tag =~ /miller/}
sort_order     = sub ($$) {
                  my $a = shift->feature->source_tag;
                  my $b = shift->feature->source_tag;
                  return  1 if $a =~ /emb/;
                  return -1 if $b =~ /emb/;
                  return $a cmp $b;
                }
glyph          = wiggle_box
bgcolor        = blue
fgcolor        = blue
sort_order     = name
label          = sub { return sprintf "%-17s", shift->name }
label_position = left
key            = TranFrags (tissue/organ; log2 thresh. 6)
Category       = modENCODE Tracks: Waterston Group
title          = sub {
	           (my $name = shift->name) =~ s/miller_//i;
                   "<b>Miller Lab: tissue/cell-type $name</b><br>".
                   "Computed transcribed fragments (log2 threshold 6.0) from trancription tiling arrays for isolated cells or tissues."
                }
citation       = Computed peaks are regions for which the signal in the ChIP-chip array are significantly above background levels.  Such regions are
                 putative binding sites for the protein targeted by the antibody.


[Reinke_peaks]
feature        = microarray_oligo
filter         = sub {shift->source_tag =~ /reinke/}
glyph          = wiggle_box
bgcolor        = blue
fgcolor        = blue
sort_order    = sub ($$) {
                  my $a = shift->feature->source_tag;
                  my $b = shift->feature->source_tag;
                  return -1 if $a =~ /N2/;
                  return  1 if $b =~ /N2/;
		  return  1 if $a =~ /YA/;
                  return -1 if $b =~ /YA/;
                  return $a cmp $b;
                }
label          = sub {
                   my $src = shift->source_tag;
                   $src =~ s/Reinke_//i;
                   $src =~ s/N2EE/early embryo/;
                   $src =~ s/N2LE/late embryo/;
		   $src =~ s/YA/young adult/;
		   $src =~ s/^_//;
		   $src =~ s/(L\d)$/$1 larval/;
                   return sprintf "%-17s", $src;
                 }
label_position = left
key            = TranFrags (dev. stage; log2 thresh. 6)
Category       = modENCODE Tracks: Waterston Group
title          = sub {
                   (my $name = shift->name) =~ s/reinke_//i;
		   $name =~ s/YA/young adult/;
		   $name =~ s/N2EE/early embryo/;
                   $name =~ s/N2LE/late embryo/;
                   "<b>Reinke Lab: $name</b><br>".
                   "Computed transcribed fragments (log2 threshold 6.0) from trancription tiling arrays for developmental stages"
                }
citation       = TBA


[SnyderPol2]
feature        = microarray_oligo:snyder_RNAPOLII
glyph          = wiggle_density
glyph select   = wiggle_density wiggle_xyplot
bgcolor        = blue
max_score      = 20
height         = 8
label          = RNAPolII Solexa
label_position = left
smoothing      = mean
smoothing window  = 6
key            = RNA Pol II ChIP-seq
Category       = modENCODE Tracks: Snyder Group
title          = Solexa read coverage plot for RNA Polymerase II ChIP-seq
citation       = This is a coverage map of Solexa read for RNA Polymerase ChIP.
 Only Solexa sequence reads (length ~30 bps) that align uniquely (using Eland) against
 the C.elegans genome are used. From the mapped tags a signal map of ChIP DNA
 fragments (average fragment length ~ 200 bps) is constructed where the signal
 height is the number of overlapping fragments at each nucleotide position in
 the genome.

[SnyderPOL2XY]
feature        = microarray_oligo:snyder_RNAPOLII
glyph          = wiggle_xyplot
glyph select   = wiggle_density wiggle_xyplot
neg_color      = orange
pos_color      = blue
height         = 25
max_score      = 50
label          = 0
description    = RNA Pol II Solexa
smoothing      = mean
smoothing window  = 6
key            = RNA Pol II ChIP-seq (XY-plot)
Category       = modENCODE Tracks: Snyder Group
title          = Solexa read coverage plot for RNA Polymerase II ChIP-seq
citation       = This is a coverage map of Solexa read for RNA Polymerase ChIP.
 Only Solexa sequence reads (length ~30 bps) that align uniquely (using Eland) against
 the C.elegans genome are used. From the mapped tags a signal map of ChIP DNA
 fragments (average fragment length ~ 200 bps) is constructed where the signal
 height is the number of overlapping fragments at each nucleotide position in
 the genome. 

[SnyderPol2Peaks]
feature        = microarray_oligo:snyder_RNAPOLII_peaks
glyph          = wiggle_box
bgcolor        = blue
fgcolor        = blue
label_position = left
label          = RNA Pol II Solexa
key            = RNA Pol II computed peaks
Category       = modENCODE Tracks: Snyder Group
title          = CompSolexa read coverage plot for RNA Polymerase II ChIP-seq
citation       = The are computed peaks (putative occupancy sites) for RNA Polymerase II.
 A peak height threshold is determined by requiring a false
 discovery rate <= 0.05 when comparing the number of peaks above threshold as
 compared the number from a simulated random null background wih the same
 number of mapped reads. The number of mapped tags in a putative binding region
 is compared against the normalized (normalized by correlating tag counts in
 genomic 10 Kb windows) number of mapped tags in the same region from an Input
 DNA control. Using a binomial test only regions that have a p-value <= 0.05
 are considered to be significantly enriched compared to the Input DNA control.


[PIANO_UTROME:100000]
label        = 0
strand_arrow = 0
bgcolor      = black
glyph        = generic

[PIANO_UTROME:20000]
description  = 0

[PIANO_UTROME]
feature      = three_prime_UTR:Coding_transcript
height       = 8
glyph        = full_transcript
strand_arrow = 1
filter       = sub {shift->class eq 'UTR'}
description  = 1
title        = 3 prime UTR from the UTRome project.  See UTRome.org for details.
utr_color    = gainsboro
link         = AUTO
bgcolor      = gainsboro
key          = UTRome
category     = modENCODE Tracks: Piano Group
label        = 1
citation     = 3 prime UTR from the UTRome project.  The UTRome UTRs are "gold standard" annotations, with full length
               3 prime RACE sequence converage from the gene-specific primer through to the polyA tract.  See http://UTRome.org
               for details of this project.
