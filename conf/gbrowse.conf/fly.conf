[GENERAL]   
description   = D. melanogaster modENCODE (FlyBase R5.8)
db_adaptor    = Bio::DB::SeqFeature::Store
db_args       = -adaptor DBI::mysql
                -dsn     fly
		-user    nobody

# web-site config
gbrowse_root = gbrowse
stylesheet  = /css/gbrowse.css
buttons     = images/buttons
js          = js
tmpimages   = sub {'tmp'}
balloon images = images/balloons

balloon tips        = 1
drag and drop       = 1
titles are balloons = 1
cache time          = 1

# for DAS
aggregators = processed_transcript

region segment = AUTO

plugins     = GFFDumper FastaDumper BatchDumper Submitter PrimerDesigner

quicklink plugins = GFFDumper FastaDumper

# need a little room for postgrid labels
image_padding = 80
pad_right = 25

# list of tracks to turn on by default
default features = Genes origins:overview

# The class of the objects used to establish the reference coordinates.
reference class  =

# examples to show in the introduction
examples = ftz  sos 2L:120000..140000  

search attributes = Note

# "automatic" classes to try when an unqualified identifier is given
automatic classes = CDS

head   =  <script type="text/javascript" src="/js/modencode.js"></script>
onload = balloon.maxWidth = 375;

header =
  <table style="border-bottom:5px groove blue;margin-bottom:10px">
    <tr>
      <td valign=top>
        <a href="http://www.modencode.org">
          <img src="http://www.modencode.org/img/fly_small.png"
               border=0 alt="modENCODE logo fly" />
        </a>
      </td>
      <td valign=middle>
        <span style="font:arial;font-size:18pt"><i>D. melanogaster</i> Genome Browser</span>
      </td>
    </tr>
  </table>

# a footer
footer =
	<br><br>
        <table width="100%">
        <TR>
        <TD align="LEFT" class="databody">
        For the source code for this browser, see the <a href="http://www.gmod.org">
        Generic Model Organism Database Project.</a>  <br>For other questions, send
        mail to <a href="mailto:mckays@cshl.org">mckays@cshl.org</a>.
        </TD>
        </TR>
        </table>

html1 = <script type="text/javascript">
          balloon.fadeIn=750;
          balloon.fadeOut=1;
	  balloon.delayTime=750;
        </script>
        <table width="100%">
         <TR><td align=center>
         <h2>There is a mirror for this browser available at <a href="http://modencode.oicr.on.ca/cgi-bin/gbrowse/fly">http://modencode.oicr.on.ca</a> </h2>
         </td></tr></table>

html2 =
html3 =
html4 =


html5 = <div style="padding:3px;border:2px solid blue;background:#CCCCFF;font-size:10pt;margin:auto">
        <table><tr><td width=7% rowspan=2><img src="/img/alert.png" height=40></td>
        <th align=left>modENCODE tracks denote data sets produced by members of the <a href="http://www.modencode.org">modENCODE consortium</a>.
        </th></tr><tr>
        <td><li>Some of the modENCODE tracks are included in the genome browser as 'preliminary' and may be subject to changes.
        <li>Data will become available for public use/download after being checked and validated by the
        <a href="http://www.modencode.org/Stein.shtml">modENCODE data coordinating center</a>.<li>Please contact
        <a href="mailto:help@modencode.org">help@modencode.org</a> for more information.</p>
        </td></tr></table></div><hr>

html6 =

overview bgcolor = #F0F0F0
image widths     = 450 500 600 640 800 1024
default width    = 800
max segment      = 1000001
default segment  = 5000
zoom levels      = 100 200 1000 2000 5000 10000 20000 50000 100000 200000 5000000 1000000


[DETAIL SELECT MENU]
width = 260
html  = <table style="width:100%">
         <tr>
           <th style="background:lightsteelblue;cell-padding:5">
             SELECTION
             <span style="right:0px;position:absolute;color:blue;cursor:pointer"
                   onclick="SelectArea.prototype.cancelRubber()">
               [X]
             </span>
           </th>
         </tr>
         <tr>
           <td>
             <a href="javascript:SelectArea.prototype.clearAndSubmit()">
              Zoom in
             </a>
           </td>
         </tr>
         <tr>
           <td onmouseup="SelectArea.prototype.cancelRubber()">
             <a href="?plugin=PrimerDesigner;plugin_action=Go;target_region=SELECTION">
              Design PCR primers
             </a>
           </td>
         </tr>
         <tr>
           <td onmouseup="SelectArea.prototype.cancelRubber()">
             <a href="?plugin=FastaDumper;plugin_action=Go;name=SELECTION" target="_new">
              Dump selection as FASTA
             </a>
           </td>
         </tr>
         <tr>
           <td onmouseup="SelectArea.prototype.cancelRubber()">
             <a href="http://www.flybase.org/cgi-bin/gbrowse/dmel?name=SELECTION" target="_new">
               Browse selection at FlyBase
             </a>
           </td>
         </tr>
         <tr>
           <td onmouseup="SelectArea.prototype.cancelRubber()">
             <a href="http://genome.ucsc.edu/cgi-bin/hgTracks?db=dm3&position=chrSELECTION&pix=620&Submit=submit" target="_new">
               Browse selection at UCSC
             </a>
           </td>
         </tr>
         <tr>
           <td onmouseup="SelectArea.prototype.cancelRubber()">
             <a href="?name=SELECTION;plugin=Submitter;plugin_do=Go;Submitter.target=UCSC_BLAT" target="_new">
               BLAT  this sequence
             </a>
           </td>
         </tr>
         <tr>
           <td onmouseup="SelectArea.prototype.cancelRubber()">
             <a href="?name=SELECTION;plugin=Submitter;plugin_do=Go;Submitter.target=NCBI_BLAST" target="_new">
               BLAST this sequence
             </a>
           </td>
         </tr>
       </table>


[Submitter:plugin]
submitter = [UCSC_BLAT]
            url        = http://genome.ucsc.edu/cgi-bin/hgBlat
            seq_label  = userSeq
            output     = hyperlink
            type       = DNA
            extra_html = Genome:
                         <SELECT name=org>
                         <OPTION VALUE="Human">Human</OPTION>
                         <OPTION VALUE="Chimp">Chimp</OPTION>
                         <OPTION VALUE="Rhesus">Rhesus</OPTION>
                         <OPTION VALUE="Mouse">Mouse</OPTION>
                         <OPTION VALUE="Mouse">Mouse</OPTION>
                         <OPTION VALUE="Rat">Rat</OPTION>
                         <OPTION VALUE="Cat">Cat</OPTION>
                         <OPTION VALUE="Dog">Dog</OPTION>
                         <OPTION VALUE="Horse">Horse</OPTION>
                         <OPTION VALUE="Cow">Cow</OPTION>
                         <OPTION VALUE="Opossum">Opossum</OPTION>
                         <OPTION VALUE="Platypus">Platypus</OPTION>
                         <OPTION VALUE="Chicken">Chicken</OPTION>
                         <OPTION VALUE="Lizard">Lizard</OPTION>
                         <OPTION VALUE="X. tropicalis">X. tropicalis</OPTION>
                         <OPTION VALUE="Zebrafish">Zebrafish</OPTION>
                         <OPTION VALUE="Tetraodon">Tetraodon</OPTION>
                         <OPTION VALUE="Fugu">Fugu</OPTION>
                         <OPTION VALUE="Stickleback">Stickleback</OPTION>
                         <OPTION VALUE="Medaka">Medaka</OPTION>
                         <OPTION VALUE="C. intestinalis">C. intestinalis</OPTION>
                         <OPTION VALUE="S. purpuratus">S. purpuratus</OPTION>
                         <OPTION VALUE="C. elegans">C. elegans</OPTION>
                         <OPTION VALUE="C. brenneri">C. brenneri</OPTION>
                         <OPTION VALUE="C. briggsae">C. briggsae</OPTION>
                         <OPTION VALUE="C. remanei">C. remanei</OPTION>
                         <OPTION VALUE="P. pacificus">P. pacificus</OPTION>
                         <OPTION SELECTED VALUE="D. melanogaster">D. melanogaster</OPTION>
                         <OPTION VALUE="D. simulans">D. simulans</OPTION>
                         <OPTION VALUE="D. sechellia">D. sechellia</OPTION>
                         <OPTION VALUE="D. yakuba">D. yakuba</OPTION>
                         <OPTION VALUE="D. erecta">D. erecta</OPTION>
                         <OPTION VALUE="D. ananassae">D. ananassae</OPTION>
                         <OPTION VALUE="D. pseudoobscura">D. pseudoobscura</OPTION>
                         <OPTION VALUE="D. persimilis">D. persimilis</OPTION>
                         <OPTION VALUE="D. virilis">D. virilis</OPTION>
                         <OPTION VALUE="D. mojavensis">D. mojavensis</OPTION>
                         <OPTION VALUE="D. grimshawi">D. grimshawi</OPTION>
                         <OPTION VALUE="A. gambiae">A. gambiae</OPTION>
                         <OPTION VALUE="A. mellifera">A. mellifera</OPTION>
                         <OPTION VALUE="S. cerevisiae">S. cerevisiae</OPTION>
                         <OPTION VALUE="SARS">SARS</OPTION>
                         </SELECT>

            [NCBI_BLAST]
            confirm   = 1
            url       = http://www.ncbi.nlm.nih.gov/blast/Blast.cgi
            seq_label = QUERY
            PAGE      = Nucleotides
            PROGRAM   = blastn
            DATABASE  = nr
            CLIENT    = web
            CMD       = put



########################
# Default glyph settings
########################


[TRACK DEFAULTS]
glyph         = generic
height        = 10
fgcolor       = black
font2color    = blue
label density = 100
bump density  = 500
# where to link to when user clicks in detailed view
link          = AUTO


################## TRACK CONFIGURATION ####################
# the remainder of the sections configure individual tracks
###########################################################

[Genes]
feature      = gene:FlyBase pseudogene:FlyBase
glyph        = gene
height       = 8
bgcolor      = sub {
                 my $f = shift;
		 return 'white' if $f->primary_tag eq 'pseudogene';
		 return $f->strand < 1 ? 'turquoise' : 'violet';
               }
utr_color    = silver
label        = sub {
		my $f = shift;
		my $dn = $f->display_name;
		my @aliases = $f->each_tag_value('Alias');
		foreach (@aliases) {
		   return "$dn ($_)" if /^\w+-\d+/;
		}
		return $dn;
	}
filter       = sub {
                 my @subf = eval{shift->get_SeqFeatures('mRNA')};
		 return @subf > 0;
              }
description  = sub {
	my $f = shift;
	my @subf = eval{$f->get_SeqFeatures};
	my $note;
	for my $sf (@subf) {
	   next unless $sf->primary_tag =~ /RNA|pseudo/;
	   $note ||= join '; ',$sf->each_tag_value('Note');
	}
        $note;
  }
link         = http://www.flybase.org/cgi-bin/uniq.html?species=Dmel&field=SYN&db=fbgn&context=$name&caller=quicksearch
label_transcripts =  sub { return shift->primary_tag eq 'mRNA' }
das category = transcription
key          = FlyBase Genes
category     = Gene Models and Predictions
citation     = Annotated gene models from FlyBase Release R5.4; Nov 2007. 

[Genes:100000]
glyph        = generic
bump         = 0
maxdepth     = 1
stranded     = 1
label        = 0
description  = 0

[TranslationF]
glyph        = translation
global feature = 1
height       = 20
fgcolor      = purple
start_codons = 0
strand       = +1
arrow_height = 2
translation  = 3frame
category     = Sequence
key          = 3-frame translation (forward)
citation     = This track shows the position of stop codons at low magnifications,
	and the 3-frame translation at high magnifications.  Only the forward strand
	is shown.

[DNA/GC Content]
glyph          = dna
global feature = 1
strand         = both
gc_window      = auto
height         = 40
fgcolor        = red
key            = GC Content
category       = Sequence
citation       = This track show the %GC of the displayed sequence region.  When zoomed in close enough, the DNA sequence is displayed

[TranslationR]
glyph        = translation
global feature = 1
height       = 20
fgcolor      = blue
strand       = -1
start_codons = 0
arrow_height = 2
translation  = 3frame
category     = Sequence
key          = 3-frame translation (reverse)
citation     = This track shows the position of stop codons at low magnifications,
	and the 3-frame translation at high magnifications.  Only the reverse
	strand is shown.


[ETILE:40001]
smooting         = mean
smoothing window = 4
max_score        = 25
min_score        = 0


[ETILE]
smoothing     = mean
max_score     = 20
smoothing window = 16
feature       = microarray_oligo
filter        = sub {shift->source =~ /stage/}
glyph         = wiggle_density
graph_type    = boxes
scale         = right
bgcolor       = black
category      = Gene Expression:Developmental Stages
label         = sub {
                 my $desc = shift->source;
                 $desc =~ s/stage0?//;
                 $desc -= 1;
                 $desc *= 2;
                 my $t2 = $desc + 2;
                 return "$desc-${t2}hrs";
                }
title          = sub {
                 my $desc = shift->source;
                 $desc =~ s/stage0?//;
                 $desc -= 1;
                 $desc *= 2;
                 my $t2 = $desc + 2;
                 return "Transcription tiling array $desc-${t2}hrs";
                }
label_position = left
description   = 0
key           = Transcription Levels 0-24 hrs
citation      = This track shows an estimate of RNA abundance (transcription) during the first 24 hours  of 
                <i>D. melanogaster</i> development,
                measured by a tiling array as described in <a href="http://www.ncbi.nlm.nih.gov/entrez/query.fcgi?db=
                pubmed&cmd=Retrieve&dopt=AbstractPlus&list_uids=16951679&query_hl=1&itool=pubmed_docsum" target="_new">
                Manak JR, et al. Nature Genet. 2006 Oct;38(10):1151-8.</a>
# source names are chosen so they sort asciibetically
sort_order    = sub ($$) {
                  shift->feature->source cmp shift->feature->source
                }


 
[TRANSFRAGS]
feature        = microarray_oligo
filter         = sub {shift->source =~ /set\d+/}
glyph          = wiggle_box
height         = 8
bgcolor        = blue
fgcolor        = blue
category       = Gene Expression:Developmental Stages
key            = Transcribed Fragments 0-24 hrs
sort_order     = sub ($$) {
                   my $a = shift->feature->source;
                   my $b = shift->feature->source;
                   $a cmp $b;
                 }
label          =  1
label_position = left
citation       = This track shows the location of sites showing transcription during $time of <i>D. melanogaster</i> development,&nbsp;
                 measured by a tiling array as described in <a href="http://www.ncbi.nlm.nih.gov/entrez/query.fcgi?db=
                 pubmed&cmd=Retrieve&dopt=AbstractPlus&list_uids=16951679&query_hl=1&itool=pubmed_docsum" target="_new">
                 Manak JR, et al. Nature Genet. 2006 Oct;38(10):1151-8.</a>

[EST:100000]
feature       = match_part:sim4_na_dbEST.diff.dmel

[EST:101]
fontcolor     = black
height        = 5

[EST]
feature       = match:sim4_na_dbEST.diff.dmel
glyph         = segments
labels        = 1
label	      = sub { 
	         my $n = shift->name;
	         $n =~ s/\..+//;	
	         $n;
	       }
category      = Gene Expression
draw_target   = 1
show_mismatch = 1
ragged_start  = 1
height        = 5
bgcolor       = limegreen
fgcolor       = black
connector     = solid
key           = EST (all)
citation      = EST ("expressed sequence tags") indicated in light green.   <i>D. melanogaster</i> EST sequences submitted to the 
                sequence databases prior to 2003 aligned using sim4 (Florea, et al., 1998, Genome Res. 8:967-74) to Release 
                3 by the BDGP and promoted to Releases 4 and 5 by FlyBase. D. melanogaster EST sequences submitted since 2003
                aligned to Releases 4 and 5 by NCBI and submitted to FlyBase.   


[ESTSPLICED:100000]
bump          = 0
label         = 0

[ESTSPLICED]
feature       = match:sim4_na_dbEST.diff.dmel
glyph         = segments
labels        = 1
label         = sub {
                 my $n = shift->name;
                 $n =~ s/\..+//;
                 $n;
               }
filter        = sub {
                  shift->segments > 1;
               }
category      = Gene Expression
draw_target   = 1
show_mismatch = 1
ragged_start  = 1
height        = 5
bgcolor       = limegreen
fgcolor       = black
connector     = solid
key           = EST (spliced)
das category  = transcription
citation      = EST ("expressed sequence tags") that span an intron are indicated in light green.   <i>D. melanogaster</i> EST sequences submitted to the
                sequence databases prior to 2003 aligned using sim4 (Florea, et al., 1998, Genome Res. 8:967-74) to Release
                3 by the BDGP and promoted to Releases 4 and 5 by FlyBase. D. melanogaster EST sequences submitted since 2003
                aligned to Releases 4 and 5 by NCBI and submitted to FlyBase.


[CONGO:20001]
strand_arrow  = 0
bump          = 0
fgcolor       = yelow

[CONGO]
feature       = match:CONGO
strand_arrow  = 1
bgcolor       = yellow
height        = 6
category      = Gene Models and Predictions
key           = CONGO exons
citation      = Data imported from flybase. Region of sequence conservation across multiple Drosophila species, with a pattern of conservation
                indicative of a protein-coding extent and termini consistent with exon structure (start, splice or stop); submitted by M. Lin and M. Kellis.

[CONGO:overview]
feature       = match:CONGO
strand_arrow  = 1
bgcolor       = yellow
height        = 6
category      = Gene Models and Predictions
key           = CONGO exons
citation      = Data imported from flybase. Region of sequence conservation across multiple Drosophila species, with a pattern of conservation
                indicative of a protein-coding extent and termini consistent with exon structure (start, splice or stop); submitted by M. Lin and M. Kellis.


[Affy2:10001]
label         = 0
bump          = 0
strand_arrow  = 0

[Affy2]
feature       = oligonucleotide:Drosophila_2
category      = Genome Reagents
strand_arrow  = 1
height        = 6
bgcolor       = orange
fgcolor       = orange
key           = Affymetrix GeneChip 2
citation      = Data imported from FlyBase. Oligonucleotides (25-mers) designed by Affymetrix to correspond to annotated transcripts in D. melanogaster. 
                Used for the Affymetrix GeneChip Drosophila Genome 2.0 Array, release date July 1, 2004.
label         = 1



[BDGP_RACE]
feature       = match:RACE
glyph         = segments
label         = 1
#category      = Gene Expression
category      = modENCODE Tracks: Celniker Group
draw_target   = 1
show_mismatch = 1
ragged_start  = 1
height        = 5
bgcolor       = lightsteelblue
fgcolor       = black
connector     = solid
key           = BDGP 5 prime RACE
label         = sub {
                  my $f = shift;
                  my @t = $f->each_tag_value('Alias');
                  my $label = shift @t;
                  $label =~ s/\:.+// if $label;
                  return pop @t;
                }
balloon hover = sub {
                  my $f = shift;
                  my @t = $f->each_tag_value('Alias');
		  my $label = shift @t;
		  $label =~ s/\:.+// if $label;
		  my $match = pop @t;
		  return $label && $match ? "$label: matches $match" : '';
                }
citation      = <a href="http://www.fruitfly.org/" target="_BLANK">Berkely Drosophila Genome Project</a> 5 prime Random Amplification of cDNA ends. 
                These are preliminary data from the <a href="http://www.modencode.org/Celniker.shtml">Celniker Lab</a>, part of the modENCODE
                consortium.  The 5 prime RACE experiments are designed to help identify regulatory elements.  This track shows RACE amplification products
                aligned to the <i>Drosophila</i> genome (assembly 5).



[SOFT_TRANSFRAGS]
glyph         = wiggle_box
feature       = celniker_transfrag
filter        = sub { shift->source_tag !~ /emb/ }
height        = 8
bgcolor       = blue
fgcolor       = blue
#category      = Gene Expression:Cell lines 
category      = modENCODE Tracks: Celniker Group
key           = TransFrags (cell line)
sort_order    = sub ($$) {
                  my $a = shift->feature->source;
                  my $b = shift->feature->source;
                  $a cmp $b;
                }
label_position = left
balloon hover = sub {
                  my $s = shift->source_tag;
                  return "Transcribed fragment for cell line: $s";
                }
label         = sub { 
	          my $s = shift->source_tag; 
		  $s =~ s/Transfrag_(\S+)_band\S+/$1/;
		  return sprintf "%-13s", $s;
                }
citation      = Expression profile maps detailing the sites of transcription across the Drosophila genome for different cell lines.
                These are assembled with minRun and maxGap parameters, based on the signal graph tracks.
                Data can be downloaded at <a href="ftp://ftp.modencode.org/pub/celniker/expression/38bp-arrays/transfrags/">
		ftp://ftp.modencode.org</a>.

[SOFT_TRANSFRAGS_DEV]
feature       = celniker_transfrag
glyph         = wiggle_box
filter        = sub { shift->source_tag =~ /emb/ }
height        = 8
bgcolor       = blue
fgcolor       = blue
#category      = Gene Expression:Developmental Stages
category      = modENCODE Tracks: Celniker Group
key           = TransFrags (embryo)
sort_order    = sub ($$) {
                  my $a = shift->feature->source;
                  my $b = shift->feature->source;
                  $a cmp $b;
                }
label_position = left
balloon hover = sub {
                  my $s = shift->source_tag;
                  return "Transcribed fragment for $s";
                }
label         = sub {
                  my $s = shift->source_tag;
                  $s =~ s/Dm_//;
                  return sprintf "%-13s", $s;
                }
citation      = Expression profile maps detailing the sites of transcription across the Drosophila genome for different
                developmental stages.
                These are assembled with minRun and maxGap parameters, based on the signal graph tracks.
                Data can be downloaded at <a href="ftp://ftp.modencode.org/pub/celniker/expression/38bp-arrays/transfrags/">
                ftp://ftp.modencode.org</a>.


# semantic zooming for < 20Kb
[CELTILE50:40001]
smoothing window = 4
min_score        = 3

# The min/max/smoothing is tricky.
# I used the Gingeras arrays and
# the Affy "present" call as a guide for tweaking
[CELTILE50]
smoothing        = mean
smoothing window = 16
min_score        = 1
max_score        = 8
height           = 8
feature          = microarray_oligo
glyph            = wiggle_density
scale            = right
bgcolor          = black
#category         = Gene Expression:Cell lines
category      = modENCODE Tracks: Celniker Group
filter           = sub {
                     local $_ = shift->source;
                     return /Dro2/ && /bandwidth50/;
                  }
label            = sub {
                     my $desc = shift->source;
		     my ($bw) = $desc =~ /bandwidth(\d+)/;
		     $desc =~ s/Dro2_AS_(\S+)_ban\S+/$1/;
		     return sprintf "%-13s", $desc;
                  }
label_position   = left
description      = 0
key              = Transcription (cell-line bw=50)
sort_order       = sub ($$) {
                     shift->feature->source cmp shift->feature->source
                   }
citation         = Expression intensities for different Drosophila cell lines using 38 bp whole
                   genome tiling arrays. Data can be downloaded from
                   <a href="ftp://ftp.modencode.org/pub/celniker/expression/38bp-arrays/signal_graphs/">
		   ftp://ftp.modencode.org</a>


[CELTILE0:40001]
smoothing window = 4
min_score        = 4

[CELTILE0]
smoothing        = mean
smoothing window = 16
min_score        = 1
max_score        = 8
height           = 8
feature          = microarray_oligo
glyph            = wiggle_density
scale            = right
bgcolor          = black
#category         = Gene Expression:Cell lines
category      = modENCODE Tracks: Celniker Group
filter           = sub {
                     local $_ = shift->source;
                     return /Dro2/ && /bandwidth0/;
                  }
label            = sub {
                     my $desc = shift->source;
                     my ($bw) = $desc =~ /bandwidth(\d+)/;
                     $desc =~ s/Dro2_AS_(\S+)_ban\S+/$1/;
                     return sprintf "%-13s", $desc;
                  }
label_position   = left
description      = 0
key              = Transcription (cell-line bw=10)
sort_order       = sub ($$) {
                     shift->feature->source cmp shift->feature->source
                   }
citation         = Expression intensities for different Drosophila cell lines using 38 bp whole 
		   genome tiling arrays. Data can be downloaded from
                   <a href="ftp://ftp.modencode.org/pub/celniker/expression/38bp-arrays/signal_graphs/">
                   ftp://ftp.modencode.org</a>


[TRANSPOSON]
feature           = transposable_element
glyph             = span
fgcolor           = blue
key               = Natural Transposons
category          = Genome Features
citation          = From FlyBase: Natural transposons indicated in blue. Extent of a natural transposable element in the sequenced strain (at the time it was sequenced).
                    transposon insertions sites are indicated as red triangles.

[TRANSPOSON_IS]
feature           = transposable_element_insertion_site
glyph             = triangle
orient            = S
fgcolor           = red
bgcolor           = red
point             = 1
height            = 6
key               = Transposon insertion site
citation          = From FlyBase: Mapped transposon insertions sites are indicated as red triangles.
category          = Genome Features

# Some reservations about putting tRNAs and ncRNAs in a category other than genes
# but the tracks were specifically requested and would otherwise be lost amongst
# coding gene models
[TRNA]
feature          = gene:FlyBase
filter           = sub { shift->name =~ /^tRNA/ }
glyph            = generic
bgcolor          = white
fgcolor          = black
height           = 5
description      = 1
key              = tRNAs
category         = Genome Features

[NCRNA]
feature           = gene:FlyBase
filter            = sub {
                    my @subf = eval{shift->get_SeqFeatures};
                    return grep {!/mRNA|tRNA/} @subf;
                  }
glyph            = generic
strand_arrow     = 1
bgcolor          = wheat
fgcolor          = black
height           = 5
description      = 1
key              = Non-coding RNAs
category         = Genome Features
citation         = From Flybase: noncoding RNAs, including snRNAs, snoRNA, miRNAs, ncRNAs and rRNAs. Extent of transcribed region corresponding 
                   to an annotated non-coding RNA (intron structure not shown)

[DMG2]
feature      = gene:DMG2
glyph        = gene
#category     = Gene Models and Predictions
category      = modENCODE Tracks: Celniker Group
height       = 8
bgcolor      = sub {shift->strand < 1 ? 'turquoise' : 'violet'}
description  = 0
label        = sub {
              my $f = shift;
              my $id = $f->load_id;
              $id;
              }
das category = transcription
key          = DMG2 gene models
citation     = Brent lab (Celniker project) annotated gene models from the Brent lab that were based on DMG2 cDNA clusters.

[DMG2:100000]
glyph        = generic
bump         = 0
maxdepth     = 1
stranded     = 1
label        = 0
description  = 0

[clusters]
feature       = transcript_region:PASA
glyph         = processed_transcript
#category      = Gene Expression
category      = modENCODE Tracks: Celniker Group
draw_target   = 1
show_mismatch = 1
ragged_start  = 1
height        = 8
bgcolor       = yellow
description   = 0
label         = sub {
                  my $f = shift;
                  my $id = $f->load_id;
                  $id;
               }
label_position = left
key           = cDNA clusters (DMG2)
stranded      = 1
show_stranded = 1
citation     = Brent lab (Celniker project)<br>
 cDNAs are downloaded from GenBank at the beginning of each round. ESTs
 and mRNAs that have been added or changed since the previous run 
 are selected. The cDNAs are clustered using the PASA pipeline developed
 by Brian Haas at TIGR).  This track displays the cDNA assemblies. 

[RTPCR:100000]
feature   = match_part:dm3

[RTPCR:101]
fontcolor     = black
height        = 5

[RTPCR]
feature       = cDNA_match:dm3
glyph         = segments
labels        = 1
label         = sub {
                my $n = shift->name;
                $n =~ s/\..+//;
                $n;
              }
category      = modENCODE Tracks: Celniker Group
draw_target   = 1
show_mismatch = 1
ragged_start  = 1
height        = 5
bgcolor       = limegreen
fgcolor       = black
connector     = solid
key           = RT-PCR
balloon click = <h3>RTPCR product: $name</h3> <a
 href='http://www.ncbi.nlm.nih.gov/entrez/query.fcgi?db=nucest&cmd=search&term=$name'>
 Search <b>$name</b> at dbEST</a><br> 
 <a href='ftp://ftp.modencode.org/pub/celniker/unchecked/RTPCR/DMG1_RTPCR/'>
 Go to this data submission on FTP site</a><br>
citation      = Brent lab (Celniker project) RT-PCR products were amplified from a RNA pool to look for
 evidence of specific transcript models. All PCR products were sequenced in both
 directions; traces are available at the NCBI Trace Archive, and ESTs
 submitted to the dbEST archive at NCBI.  Alignments to <i>Drosophila
 melanogaster</i> genome were against the Flybase Release 5.  modencode
 track published 6/2/2008.

[Origin_peaks_box]
feature       = computed_peaks
glyph         = wiggle_box
filter        = sub {shift->source_tag =~ /macalpine/ }
bgcolor       = blue
fgcolor       = blue
height        = 8
key           = Origins of Replication
category      = modENCODE Tracks: MacAlpine Group
label         = sub {
               my $src = shift->source_tag;
               $src =~ s/macalpine_//;
	       $src =~ s/_\S+//;
               return $src;
               }
label_position = left
title         = Computed peaks from the Agilent genome tiling arrays, inferred origins of replication
citation      = [PRELIMINARY] Early origins of replication were identified by treating
 cells with hydroxyurea (HU), a potent inhibitor of nucleotide synthesis,
 in the presence of the nucleotide analogue BrdU.  Treatment of
 synchronized cells with HU stalls replication forks and activates the
 intra S-phase checkpoint, thereby limiting BrdU incorporation to those
 sequences immediately adjacent to early activating replication origins.
 BrdU enriched sequences surrounding early origins of replication are
 then enriched by immunoprecipitation with an anti-BrdU antibody.  Early
 origins are then detected by hybridization to Agilent genomic tiling
 arrays.<br> modENCODE group: MacAlpine Group

[MA2CXY]
smoothing     = mean
smoothing window = 10
feature       = microarray_oligo
filter        = sub {shift->source_tag =~ /MA2C/ }
glyph         = wiggle_xyplot
graph_type    = boxes
scale         = right
bgcolor       = black
neg_color     = orange
pos_color     = blue
min_score     = -2
max_score     = 2
label         = 0
category      = modENCODE Tracks: MacAlpine Group
description   = sub {
               my $src = shift->source_tag;
               $src =~ s/MA2C//;
	       $src =~ s/macalpine_//;
               return $src;
               }
label_position = left
key           = Early Replication Origins (XY-plot)
citation      =  [PRELIMINARY] Early origins of replication were identified by
 treating cells with hydroxyurea (HU), a potent inhibitor of nucleotide
 synthesis, in the presence of the nucleotide analogue BrdU.  Treatment
 of synchronized cells with HU stalls replication forks and activates the
 intra S-phase checkpoint, thereby limiting BrdU incorporation to those
 sequences immediately adjacent to early activating replication origins.
 BrdU enriched sequences surrounding early origins of replication are
 then enriched by immunoprecipitation with an anti-BrdU antibody.  Early
 origins are then detected by hybridization to Agilent genomic tiling
 arrays.<br> modENCODE group: MacAlpine Group
sort_order    = sub ($$) {
                 shift->feature->source cmp shift->feature->source
               }

[MAC2C:50000]
smoothing window = 1
	  
[MA2C]
smoothing     = mean
smoothing window = 16
feature       = microarray_oligo
filter        = sub {shift->source_tag =~ /MA2C/ }
glyph         = wiggle_density
neg_color     = orange
pos_color     = blue
min_score     = -0.5
max_score     = 0.5
label         = sub {
	          my $src = shift->source_tag;
		  $src =~ s/macalpine_//;
		  $src =~ s/_\S+//;
		  return $src;
                }
category       = modENCODE Tracks: MacAlpine Group
description    = 0
label_position = left
key            = Early Replication Origins
citation       =  [PRELIMINARY] Early origins of replication were identified by
 treating cells with hydroxyurea (HU), a potent inhibitor of nucleotide
 synthesis, in the presence of the nucleotide analogue BrdU.  Treatment
 of synchronized cells with HU stalls replication forks and activates the
 intra S-phase checkpoint, thereby limiting BrdU incorporation to those
 sequences immediately adjacent to early activating replication origins.
 BrdU enriched sequences surrounding early origins of replication are
 then enriched by immunoprecipitation with an anti-BrdU antibody.  Early
 origins are then detected by hybridization to Agilent genomic tiling
 arrays.<br> modENCODE group: MacAlpine Group
sort_order    = sub ($$) {
                 shift->feature->source cmp shift->feature->source
               }

[Origin_TimingXy]
smoothing     = mean
smoothing window = 16
feature       = microarray_oligo
filter        = sub {shift->source_tag =~ /macalpine\S+timing/ }
glyph         = wiggle_xyplot
graph_type    = boxes
scale         = right
bgcolor       = black
neg_color     = orange
pos_color     = blue
min_score     = -1
max_score     = 1
label         = 0
category      = modENCODE Tracks: MacAlpine Group
description   = sub {
               my $src = shift->source_tag;
               $src =~ s/Timing//;
               return $src;
               }
label_position = left
key           = Replication Timing (XY-plot)
sort_order    = sub ($$) {
                 shift->feature->source cmp shift->feature->source
               }
citation      = [PRELIMINARY] The relative time of replication for all unique
 sequences in the Drosophila genome was determined by synchronizing
 tissue culture cell and differentially labeling early and late
 replicating intermediates. The differentially labeled replication
 intermediates were then hybridized to Agilent genomic tiling arrays to
 identify early and late replicating domains.<br>modENCODE group:
 MacAlpine

[Origin_Timing]
smoothing     = mean
smoothing window = 16
feature       = microarray_oligo
filter        = sub {shift->source_tag =~ /macalpine\S+timing/ }
glyph         = wiggle_density
graph_type    = boxes
scale         = right
bgcolor       = black
neg_color     = orange
pos_color     = blue
min_score     = -0.5
max_score     = 0.5
label         = 0
category      = modENCODE Tracks: MacAlpine Group
description   = sub {
               my $src = shift->source_tag;
	       $src =~ s/macalpine_//;
               $src =~ s/_\S+//;
               return $src;
               }
label_position = left
key           = Replication Timing
sort_order    = sub ($$) {
                 shift->feature->source cmp shift->feature->source
               }
citation      = [PRELIMINARY] The relative time of replication for all unique
 sequences in the Drosophila genome was determined by synchronizing
 tissue culture cell and differentially labeling early and late
 replicating intermediates. The differentially labeled replication
 intermediates were then hybridized to Agilent genomic tiling arrays to
 identify early and late replicating domains.


[HenikoffH3]
feature       = microarray_oligo:henikoff_H3
glyph         = wiggle_density
pos_color     = blue
neg_color     = orange
bgcolor       = blue
fgcolor       = black
height        = 8
key           = H3
category      = modENCODE Tracks: Henikoff Group
label         = 0
title         = Chromatin affinity-purified DNA with tagged histone H3 from Drosophila S2 cells over input DNA.
smoothing     = mean
smoothing window = 16
citation      = No info provided by submitter
min_score     = -1.5
max_score     = 1.5
citation      = Histones were identically tagged at their N-termini with biotin ligase
 recognition peptide (BLRP) (de Boer, E. et al. Proc Natl Acad Sci USA 100,
 7480-5 (2003), and Beckett, D. et al. Protein Sci 8, 921-9 (1999)) and
 expressed together with E. coli biotin ligase in Drosophila S2 cells.
 Nuclei were prepared as described (McKittrick, E., et al., Proc. Natl.
 Acad. Sci. USA 101, 1525-1530 (2004).), and treated with micrococcal
 nuclease (MNase) to digest chromatin to yield mostly mononucleosomes.
 Chromatin was extracted (input) using a modification of the procedure of
 Blower, M.D., et al. (Developmental Cell 2, 31 9-330 (2002)). Biotinylated
 histone-containing nucleosome particles (pull-down) were purified and DNA
 was extracted from both input and pull-down fraction for microarray
 analysis. DNA from input (3 ug) and pull-down (4 ug) was provided to
 NimbleGen Systems for differential labelling by random priming with Cy3-
 or Cy5 and hybridization to oligonucleotide arrays.  For each experiment,
 input and pull-down channel signal intensities and scaled log2(ratios)
 were provided by NimbleGen Systems.

[HenikoffH3XY]
feature       = microarray_oligo:henikoff_H3
glyph         = wiggle_xyplot
pos_color     = blue
neg_color     = orange
bgcolor       = blue
fgcolor       = black
height        = 20
key           = H3 (XY-plot)
category      = modENCODE Tracks: Henikoff Group
description   = sub {
               my $src = shift->source_tag;
               $src =~ s/henikoff_//;
               return $src;
               }
label          = left
title         = Chromatin affinity-purified DNA with tagged histone H3 from <i>Drosophila</i> S2 cells over input DNA.
smoothing     = mean
smoothing window = 16
min_score     = -2
max_score     = 2
citation      = Histones were identically tagged at their N-termini with biotin ligase
 recognition peptide (BLRP) (de Boer, E. et al. Proc Natl Acad Sci USA 100,
 7480-5 (2003), and Beckett, D. et al. Protein Sci 8, 921-9 (1999)) and
 expressed together with E. coli biotin ligase in Drosophila S2 cells.
 Nuclei were prepared as described (McKittrick, E., et al., Proc. Natl.
 Acad. Sci. USA 101, 1525-1530 (2004).), and treated with micrococcal
 nuclease (MNase) to digest chromatin to yield mostly mononucleosomes.
 Chromatin was extracted (input) using a modification of the procedure of
 Blower, M.D., et al. (Developmental Cell 2, 31 9-330 (2002)). Biotinylated
 histone-containing nucleosome particles (pull-down) were purified and DNA
 was extracted from both input and pull-down fraction for microarray
 analysis. DNA from input (3 ug) and pull-down (4 ug) was provided to
 NimbleGen Systems for differential labelling by random priming with Cy3-
 or Cy5 and hybridization to oligonucleotide arrays.  For each experiment,
 input and pull-down channel signal intensities and scaled log2(ratios)
 were provided by NimbleGen Systems.

[HenikoffH33]
feature       = microarray_oligo:henikoff_H33
glyph         = wiggle_density
pos_color     = blue
neg_color     = orange
bgcolor       = blue
fgcolor       = black
height        = 8
key           = H33
category      = modENCODE Tracks: Henikoff Group
label         = sub {
               my $src = shift->source_tag;
               $src =~ s/henikoff_//;
               return $src;
               }
label_position = left
title          = Chromatin affinity-purified DNA with tagged histone H3.3 region from
                 <i>Drosophila</i>  S2 cells over input DNA.
smoothing     = mean
smoothing window = 16
min_score     = -2
max_score     = 2
citation      = Histones were identically tagged at their N-termini with biotin ligase
 recognition peptide (BLRP) (de Boer, E. et al. Proc Natl Acad Sci USA 100,
 7480-5 (2003), and Beckett, D. et al. Protein Sci 8, 921-9 (1999)) and
 expressed together with E. coli biotin ligase in Drosophila S2 cells.
 Nuclei were prepared as described (McKittrick, E., et al., Proc. Natl.
 Acad. Sci. USA 101, 1525-1530 (2004).), and treated with micrococcal
 nuclease (MNase) to digest chromatin to yield mostly mononucleosomes.
 Chromatin was extracted (input) using a modification of the procedure of
 Blower, M.D., et al. (Developmental Cell 2, 31 9-330 (2002)). Biotinylated
 histone-containing nucleosome particles (pull-down) were purified and DNA
 was extracted from both input and pull-down fraction for microarray
 analysis. DNA from input (3 ug) and pull-down (4 ug) was provided to
 NimbleGen Systems for differential labelling by random priming with Cy3-
 or Cy5 and hybridization to oligonucleotide arrays.  For each experiment,
 input and pull-down channel signal intensities and scaled log2(ratios)
 were provided by NimbleGen Systems.

[HenikoffH33XY]
feature       = microarray_oligo:henikoff_H33
glyph         = wiggle_xyplot
pos_color     = blue
neg_color     = orange
bgcolor       = blue
fgcolor       = black
height        = 20
key           = H33 (XY-plot)
category      = modENCODE Tracks: Henikoff Group
description   = sub {
               my $src = shift->source_tag;
               $src =~ s/henikoff_//;
               return $src;
               }
label         = 0
title          = Chromatin affinity-purified DNA with tagged histone H3.3 region from
                 <i>Drosophila</i>  S2 cells over input DNA.
smoothing     = mean
smoothing window = 16
min_score     = -3
max_score     = 3
citation      = Histones were identically tagged at their N-termini with biotin ligase
 recognition peptide (BLRP) (de Boer, E. et al. Proc Natl Acad Sci USA 100,
 7480-5 (2003), and Beckett, D. et al. Protein Sci 8, 921-9 (1999)) and
 expressed together with E. coli biotin ligase in Drosophila S2 cells.
 Nuclei were prepared as described (McKittrick, E., et al., Proc. Natl.
 Acad. Sci. USA 101, 1525-1530 (2004).), and treated with micrococcal
 nuclease (MNase) to digest chromatin to yield mostly mononucleosomes.
 Chromatin was extracted (input) using a modification of the procedure of
 Blower, M.D., et al. (Developmental Cell 2, 31 9-330 (2002)). Biotinylated
 histone-containing nucleosome particles (pull-down) were purified and DNA
 was extracted from both input and pull-down fraction for microarray
 analysis. DNA from input (3 ug) and pull-down (4 ug) was provided to
 NimbleGen Systems for differential labelling by random priming with Cy3-
 or Cy5 and hybridization to oligonucleotide arrays.  For each experiment,
 input and pull-down channel signal intensities and scaled log2(ratios)
 were provided by NimbleGen Systems.

[HenikoffNUCL]		
feature       = microarray_oligo:henikoff_NUCL
glyph         = wiggle_density
pos_color     = blue
neg_color     = orange
bgcolor       = blue
fgcolor       = black
height        = 8
min_score     = 0
max_score     = 1
key           = Nucleosomal
category      = modENCODE Tracks: Henikoff Group
label         = sub {
	         my $src = shift->source_tag;
                 $src =~ s/henikoff_//;
                 return $src;
               }
label_position = left
title          = Nucleosomal DNA over genomic DNA.
smoothing      = mean
smoothing window = 16
min_score     = -.7
max_score     = .7
citation      = Histones were identically tagged at their N-termini with biotin ligase
 recognition peptide (BLRP) (de Boer, E. et al. Proc Natl Acad Sci USA 100,
 7480-5 (2003), and Beckett, D. et al. Protein Sci 8, 921-9 (1999)) and
 expressed together with E. coli biotin ligase in Drosophila S2 cells.
 Nuclei were prepared as described (McKittrick, E., et al., Proc. Natl.
 Acad. Sci. USA 101, 1525-1530 (2004).), and treated with micrococcal
 nuclease (MNase) to digest chromatin to yield mostly mononucleosomes.
 Chromatin was extracted (input) using a modification of the procedure of
 Blower, M.D., et al. (Developmental Cell 2, 31 9-330 (2002)). Biotinylated
 histone-containing nucleosome particles (pull-down) were purified and DNA
 was extracted from both input and pull-down fraction for microarray
 analysis. DNA from input (3 ug) and pull-down (4 ug) was provided to
 NimbleGen Systems for differential labelling by random priming with Cy3-
 or Cy5 and hybridization to oligonucleotide arrays.  For each experiment,
 input and pull-down channel signal intensities and scaled log2(ratios)
 were provided by NimbleGen Systems.

[HenikoffNUCLXY]
feature       = microarray_oligo:henikoff_NUCL
glyph         = wiggle_xyplot
pos_color     = blue
neg_color     = orange
bgcolor       = blue
fgcolor       = black
height        = 8
key           = Nucleosome (XY-plot)
category      = modENCODE Tracks: Henikoff Group
description   = sub {
                 my $src = shift->source_tag;
                 $src =~ s/henikoff_//;
                 return $src;
               }
label         = 0
title          = Nucleosomal DNA over genomic DNA.
smoothing     = mean
smoothing window = 16
min_score     = -1
max_score     = 1
citation      = Histones were identically tagged at their N-termini with biotin ligase
 recognition peptide (BLRP) (de Boer, E. et al. Proc Natl Acad Sci USA 100,
 7480-5 (2003), and Beckett, D. et al. Protein Sci 8, 921-9 (1999)) and
 expressed together with E. coli biotin ligase in Drosophila S2 cells.
 Nuclei were prepared as described (McKittrick, E., et al., Proc. Natl.
 Acad. Sci. USA 101, 1525-1530 (2004).), and treated with micrococcal
 nuclease (MNase) to digest chromatin to yield mostly mononucleosomes.
 Chromatin was extracted (input) using a modification of the procedure of
 Blower, M.D., et al. (Developmental Cell 2, 31 9-330 (2002)). Biotinylated
 histone-containing nucleosome particles (pull-down) were purified and DNA
 was extracted from both input and pull-down fraction for microarray
 analysis. DNA from input (3 ug) and pull-down (4 ug) was provided to
 NimbleGen Systems for differential labelling by random priming with Cy3-
 or Cy5 and hybridization to oligonucleotide arrays.  For each experiment,
 input and pull-down channel signal intensities and scaled log2(ratios)
 were provided by NimbleGen Systems.


[ncRNA:10000]
glyph        = generic
bump         = 0
maxdepth     = 1
stranded     = 1
label        = 0
description  = 0

[ncRNA]
feature       = ncRNA
filter        = sub {shift->source_tag =~ /Lai/ }
glyph         = segments
labels        = 1
stranded      = 1
strand_arrow  = 1
category      = modENCODE Tracks: Lai Group
draw_target   = 1
show_mismatch = 1
ragged_start  = 1
height        = 7
connector     = none
bgcolor       = sub {shift->strand < 1 ? 'red' : 'blue'}
fgcolor       = sub {shift->strand < 1 ? 'red' : 'blue'}
fontcolor     = sub {shift->strand < 1 ? 'red' : 'blue'}
key           = ncRNAs
citation      = [PRELIMINARY] ncRNAs<br>(&#43;) strand are red<br>(-) strand are blue<br>
sort_order    = sub ($$) {
                 shift->feature->source cmp shift->feature->source
               }
group_on      = name.source_tag
title         =  sub {
                    my $f      = shift;
                    my $n      = $f->name;
                    my $strand = $f->strand < 1 ? 'minus (-)' : 'plus (&#43;)';
                    my $t      = $f->primary_tag;
                    my $src    = $f->source_tag;
                    my ($geo)  = $f->each_tag_value('Note');
                    $geo       =~ s/GEOid_/GEO ID\:/;
                    $src       =~ s/Lai://;
                    return "<b>$t : $n</b>; Source: $src; $geo."
                  }
description    = sub {
                  my $label = shift->source_tag;
                  $label =~ s/Lai\://;
                  $label;
                }

[repeats]
smoothing      = max
smoothing window = 10
feature        = microarray_oligo
filter         = sub {shift->source_tag =~ /lai/ }
glyph          = wiggle_density
max_score      = 1
min_score      = -1
pos_color      = blue
neg_color      = red
label          = sub {
	          my $n = shift->source_tag;
		  $n =~ s/lai_//;
		  return $n
                }
label_position = left
category       = modENCODE Tracks: Lai Group
height         = 8
key            = Repetitive RNAs
label_position = left
title          =  sub {
	            my $src = shift->source_tag;
		    $src =~ s/lai_//;
		    return "<b>Small RNAs from $src</b>.  These small RNAs, identified by Solexa sequencing, are repetitive ".
                           "throughout the genome.<br>(&#43;) strand are red and (-) strand are blue<br>";
                  }
citation       = small RNAs that are repetitive throughout the genome,
 identified by Solexa sequencing.  <br>(&#43;) strand are red<br>(-) strand
 are blue<br>
sort_order     = sub ($$) {
                 shift->feature->source cmp shift->feature->source
               }


[snRNA:100000]
glyph        = generic
bump         = 0
maxdepth     = 1
stranded     = 1
label        = 0
description  = 0

[snRNA]
feature       = snRNA
filter        = sub {shift->source_tag =~ /Lai/ }
glyph         = segments
labels        = 1
stranded      = 1
strand_arrow  = 1
category      = modENCODE Tracks: Lai Group
draw_target   = 1
show_mismatch = 1
ragged_start  = 1
height        = 7
connector     = none
bgcolor       = sub {shift->strand < 1 ? 'red' : 'blue'}
fgcolor       = sub {shift->strand < 1 ? 'red' : 'blue'}
fontcolor     = sub {shift->strand < 1 ? 'red' : 'blue'}
key           = snRNAs
citation      = snRNAs identified by Solexa sequencing<br>(&#43;) strand are red<br>(-) strand are blue<br>
sort_order    = sub ($$) {
                 shift->feature->source cmp shift->feature->source
               }
group_on      = name.source_tag
title         =  sub {
                    my $f      = shift;
                    my $n      = $f->name;
                    my $strand = $f->strand < 1 ? 'minus (-)' : 'plus (&#43;)';
                    my $t      = $f->primary_tag;
                    my $src    = $f->source_tag;
                    my ($geo)  = $f->each_tag_value('Note');
                    $geo       =~ s/GEOid_/GEO ID\:/;
                    $src       =~ s/Lai://;
                    return "<b>$t : $n</b>; Source: $src; $geo."
                  }
description     = sub {
                  my $label = shift->source_tag;
                  $label =~ s/Lai\://;
                  $label;
                }


[mRNA:10000]
glyph        = generic
bump         = 0
maxdepth     = 1
stranded     = 1
label        = 0
description  = 0

[mRNA]
feature       = mRNA
filter        = sub {shift->source_tag =~ /Lai/ }
glyph         = segments
labels        = 1
stranded      = 1
strand_arrow  = 1
category      = modENCODE Tracks: Lai Group
draw_target   = 1
show_mismatch = 1
ragged_start  = 1
height        = 7
connector     = none
bgcolor       = sub {shift->strand < 1 ? 'red' : 'blue'}
fgcolor       = sub {shift->strand < 1 ? 'red' : 'blue'}
fontcolor     = sub {shift->strand < 1 ? 'red' : 'blue'}
key           = mRNAs
citation      = small mRNAs identified by Solexa sequencing.<br>(&#43;)strand are red<br>(-) strand are blue<br>
sort_order    = sub ($$) {
                 shift->feature->source cmp shift->feature->source
               }
group_on      = source_tag
title         =  sub {
                    my $f      = shift;
                    my $n      = $f->name;
                    my $strand = $f->strand < 1 ? 'minus (-)' : 'plus (&#43;)';
                    my $t      = $f->primary_tag;
                    my $src    = $f->source_tag;
                    my ($geo)  = $f->each_tag_value('Note');
                    $geo       =~ s/GEOid_/GEO ID\:/;
                    $src       =~ s/Lai://;
                    return "<b>$t : $n</b>; Source: $src; $geo."
                  }
description         = sub {
                  my $label = shift->source_tag;
		  $label =~ s/Lai\://;
		  $label;
                }

[miRNA:10000]
glyph        = generic
bump         = 0
maxdepth     = 1
stranded     = 1
label        = 0
description  = 0

[miRNA]
feature       = miRNA
filter        = sub {shift->source_tag =~ /Lai/ }
glyph         = segments
labels        = 1
stranded      = 1
strand_arrow  = 1
category      = modENCODE Tracks: Lai Group
draw_target   = 1
show_mismatch = 1
ragged_start  = 1
height        = 7
connector     = none
bgcolor       = sub {shift->strand < 1 ? 'red' : 'blue'}
fgcolor       = sub {shift->strand < 1 ? 'red' : 'blue'}
fontcolor     = sub {shift->strand < 1 ? 'red' : 'blue'}
key           = miRNAs
citation      = microRNAs identified by Solexa sequencing.  
 <br>modENCODE group: Lai<br>(+)
 strand are red<br>(-) strand are blue<br>
sort_order    = sub ($$) {
                 shift->feature->source cmp shift->feature->source
               }
group_on      = name.source_tag
title         =  sub {
                    my $f      = shift;
                    my $n      = $f->name;
                    my $strand = $f->strand < 1 ? 'minus (-)' : 'plus (&#43;)';
                    my $t      = $f->primary_tag;
                    my $src    = $f->source_tag;
                    my ($geo)  = $f->each_tag_value('Note');
                    $geo       =~ s/GEOid_/GEO ID\:/;
                    $src       =~ s/Lai://;
                    return "<b>$t : $n</b>; Source: $src; $geo."
                  }
description     = sub {
                  my $label = shift->source_tag;
                  $label =~ s/Lai\://;
                  $label;
                }

[rRNA:10000]
glyph        = generic
bump         = 0
maxdepth     = 1
stranded     = 1
label        = 0
description  = 0

[rRNA]
feature       = rRNA
filter        = sub {shift->source_tag =~ /Lai/ }
glyph         = segments
labels        = 1
stranded      = 1
strand_arrow  = 1
category      = modENCODE Tracks: Lai Group
draw_target   = 1
show_mismatch = 1
ragged_start  = 1
height        = 7
connector     = none
bgcolor       = sub {shift->strand < 1 ? 'red' : 'blue'}
fgcolor       = sub {shift->strand < 1 ? 'red' : 'blue'}
fontcolor     = sub {shift->strand < 1 ? 'red' : 'blue'}
key           = rRNAs
citation      = small rRNAs identified by Solexa sequencing.  RNA that
 comprises part of a ribosome, and that can provide both structural
 scaffolding and catalytic activity.<br>modENCODE group: Lai<br>(+)
 strand are red<br>(-) strand are blue<br>
sort_order    = sub ($$) {
                 shift->feature->source cmp shift->feature->source
               }
group_on      = name.source_tag
title         =  sub {
                    my $f      = shift;
                    my $n      = $f->name;
                    my $strand = $f->strand < 1 ? 'minus (-)' : 'plus (&#43;)';
                    my $t      = $f->primary_tag;
                    my $src    = $f->source_tag;
                    my ($geo)  = $f->each_tag_value('Note');
                    $geo       =~ s/GEOid_/GEO ID\:/;
                    $src       =~ s/Lai://;
                    return "<b>$t : $n</b>; Source: $src; $geo."
                  }
description     = sub {
                  my $label = shift->source_tag;
                  $label =~ s/Lai\://;
                  $label;
                }


[all_Lai_RNAs:10000]
glyph        = generic
bump         = 0
maxdepth     = 1
stranded     = 1
label        = 0
description  = 0

[all_Lai_RNAs]
feature       = snRNA ncRNA mRNA rRNA miRNA repeat_region
filter        = sub {shift->source_tag =~ /Lai/ }
glyph         = segments
labels        = 1
stranded      = 1
strand_arrow  = 1
category      = modENCODE Tracks: Lai Group
draw_target   = 1
show_mismatch = 1
ragged_start  = 1
height        = 7
connector     = none
bgcolor       = sub {shift->strand < 1 ? 'red' : 'blue'}
fgcolor       = sub {shift->strand < 1 ? 'red' : 'blue'}
fontcolor     = sub {shift->strand < 1 ? 'red' : 'blue'}
key           = RNAs (all)
citation      = All RNAs from the Lai group by Solexa sequencing,
 including mRNAs, snRNAs, rRNAs, ncRNAs, and repetitive regions<br>(+)
 strand are red<br>(-) strand are blue<br>
sort_order    = sub ($$) {
                 shift->feature->source cmp shift->feature->source
               }
group_on      = source_tag
title         =  sub {
                    my $f      = shift;
                    my $n      = $f->name;
                    my $strand = $f->strand < 1 ? 'minus (-)' : 'plus (&#43;)';
                    my $t      = $f->primary_tag;
                    my $src    = $f->source_tag;
                    my ($geo)  = $f->each_tag_value('Note');
                    $geo       =~ s/GEOid_/GEO ID\:/;
                    $src       =~ s/Lai://;
                    return "<b>$t : $n</b>; Source: $src; $geo."
                  }
description     = sub {
                  my $label = shift->source_tag;
                  $label =~ s/Lai\://;
                  $label;
                }


[Origin_TimingXY:overview]
smoothing     = mean
smoothing window = 16
feature       = microarray_oligo
filter        = sub {shift->source_tag =~ /macalpine\S+timing/ }
glyph         = wiggle_xyplot
graph_type    = boxes
scale         = right
bgcolor       = black
neg_color     = orange
pos_color     = blue
min_score     = -1
max_score     = 1
label         = 0
category      = Chromosome Feature
description   = sub {
               my $src = shift->source_tag;
               $src =~ s/Timing//;
               return $src;
               }
label_position = left
key           = Replication Timing
sort_order    = sub ($$) {
                 shift->feature->source cmp shift->feature->source
               }
citation      = [PRELIMINARY] The relative time of replication for all unique
 sequences in the Drosophila genome was determined by synchronizing
 tissue culture cell and differentially labeling early and late
 replicating intermediates. The differentially labeled replication
 intermediates were then hybridized to Agilent genomic tiling arrays to
 identify early and late replicating domains.<br>modENCODE group:
 MacAlpine